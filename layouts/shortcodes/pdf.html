{{- $src := .Get "src" -}}
{{- $title := .Get "title" | default "PDF Document" -}}
{{- $height := .Get "height" | default "800px" -}}

<div class="pdf-embed-container">
  <div class="pdf-header">
    <span class="pdf-title">ğŸ“„ {{ $title }}</span>
    </div>
  
  <div class="pdf-viewer-wrapper" style="position: relative; height: {{ $height }};">
    <div class="pdf-shield"></div>
    
    <iframe 
      src="{{ $src }}#toolbar=0&navpanes=0&scrollbar=1&view=FitH" 
      width="100%" 
      height="100%"
      style="border: none;"
      type="application/pdf"
      title="{{ $title }}">
    </iframe>
    
    <div class="pdf-fallback">
      <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ¨çº¿é¢„è§ˆ PDFã€‚</p>
      </div>
  </div>
</div>

<style>
.pdf-embed-container {
  margin: 2rem 0;
  border: 1px solid #e1e4e8;
  border-radius: 8px;
  overflow: hidden;
  background: #fff;
  user-select: none; /* ç¦æ­¢é€‰ä¸­æ–‡æœ¬ */
}

/* é€æ˜é®ç½©å±‚ï¼šæ”¾åœ¨ iframe é¡¶éƒ¨ï¼Œé®ä½æœ€ä¸Šé¢é‚£ä¸€æ’æŒ‰é’® */
.pdf-shield {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 60px; /* å±è”½æ‰ PDF æµè§ˆå™¨æœ€é¡¶éƒ¨çš„å·¥å…·æ ç‚¹å‡» */
  z-index: 10;
  background: rgba(255, 255, 255, 0.01); /* æåº¦é€æ˜ */
}

.pdf-header {
  display: flex;
  padding: 1rem 1.5rem;
  background: #f6f8fa;
  border-bottom: 1px solid #e1e4e8;
}

.pdf-title {
  font-weight: 600;
  color: #24292e;
}

.pdf-viewer-wrapper {
  position: relative;
  width: 100%;
  background: #525659;
  /* ç¦æ­¢å³é”® */
  -webkit-touch-callout: none;
}

/* æ·±è‰²æ¨¡å¼å…¼å®¹ */
@media (prefers-color-scheme: dark) {
  .pdf-embed-container { border-color: #30363d; background: #0d1117; }
  .pdf-header { background: #161b22; border-bottom-color: #30363d; }
  .pdf-title { color: #c9d1d9; }
}
</style>

<script>
// ç®€å•çš„å³é”®å±è”½è„šæœ¬
document.addEventListener('DOMContentLoaded', function() {
  const container = document.querySelector('.pdf-viewer-wrapper');
  if (container) {
    container.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    }, false);
  }
});
</script>
